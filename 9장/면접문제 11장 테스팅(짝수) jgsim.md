# 면접문제 11장 (짝수)

## 11.2 무작위 고장:
실행하면 죽어버리는 프로그램의 소스코드가 있다. 디버거에서 열 번 실행해본결과 같은지점에서 죽는 일은 없었다. 이 프로그램은 단일 스레드(thread) 프로그램이고, C의 표준 라이브러리만 사용한다. 프로그램에 어떤 오류가 있으면 이런 식으로 죽겠는가? 그 오류들을 각각 어떻게 테스트해 볼 수 있겠는가?

프로그램이 무작위적으로 죽는 데는 몇 가지 일반적인 원인이 있다.

1. 랜덤 변수:
    - 사용자 입력, 프로그램에서 생성된 난수, 프로그램 실행 시각 등
    - 각각 다른 경로로 실행
2. 초기화 하지 않은 변수:
    - 어떤 언어의 경우 초기화 하지 않은 변수에 쓰레기값을 넣음
    - 랜덤하게 오류가 일어날 수 있음
3. 메모리 누수:
    - 프로그램의 메모리 부족: 죽는 시점에 몇개의 프로세스가 돌고 있느냐(완전 랜덤)
    - 힙 오버플로, 데이터 손상 등도 메모리 누수 범주에 포함
4. 외부 의존성:
    - 프로그램이 다른 응용프로그램, 컴퓨터, 자원에 의존 할 경우
    - 의존관계가 많다면 언제든 죽을 수 있음

응용 프로그램에 따른 문제

- 제외(elimination) 기법
    - 시스템에 깔린 다른 모든 프로그램을 닫고 사용중인 자원을 추적
    - 프로그램에 비활성화 할 수 있는 부분이 있으면 그렇게 함
    - 여러 다른 컴퓨터에서 실행해 보면서 같은 문제가 발생하는지 살펴봄

- 특정한 상황의 발생 여부를 검사해주는 도구 활용
    - 초기화 되지 않은 변수가 있는지 검사하는 runtime 도구 등

## 11.4 No 테스트 도구:
테스트 도구를 사용하지 않고 웹 페이지에 부하 테스트(load test)를 실행하려면 어떻게할 수 있겠는가?

부하 테스트
- 웹 프로그램이 최대로 감당 할 수 있는 용량이 얼마인지 알아낼 수 있음
- 성능을 저해하는 병목 구간이 어디인지도 알아낼 수 있음
- 응용 프로그램이 부하 변동에 따라 어떻게 반응하는지 살표 볼 수 있음

주로 사용되는 성능 지표
- 반응시간(response time)
- 처리량(throughput)
- 자원 사용률(resource utilization)
- 시스템이 감내해낼 수 있는 최대 부하(maximum load)

이 다음 부하를 가할 수 있는 테스트를 설계하여 이들 지표들의 대한 성능 수치를 얻음

형식화된 테스트 도구가 없는 경우 기본적으로는 스스로 만들어 내야함

- 동시 사용자에 관계된 부하
    - 수천명의 가상 사용자를 만들어서 시뮬레이션
    - 소천 개 스레드를 갖는 프로그램을 만들어, 스레드 각각이 페이지를 로드하는 식으로 시뮬레이션
    - 각 가상 사용자가 프로그램적으로 응답 시간이나 I/O 속도등을 측정
    - 이후 수용 가능한 기준 수치와 비교

## 11.6 ATM 테스트
분산 은행 업무 시스템을 구성하는 ATM을 어떻게 테스트 하겠는가?

가정을 확실히 함
1. ATM 사용자: 아무나, 시각장애인 등
2. 용도: 인출, 이체 조회 등
3. 테스트 도구? 코드 확인 가능? ATM 기계를 직접?

테스트 가능한 컴포넌트로 나눔
- 로그인
- 인출
- 입금
- 조회
- 이체

수동테스트와 자동테스트 혼합 하여 진행

1. 수동 테스트
    - 단계적으로 진행하며 모든 오류를 검출해 낼 수 있어야함
    - 잔액 부족, 신규 계좌, 존재하지 않는 계좌 등
2. 자동화 테스트
    - 모든 시나리오를 자동화
    - 경쟁상태(race condition)와 같은 특별한 상황의 문제
    - 가상 계좌로 된 폐쇄 시스템을 구성하여 자금을 빠른속도로 인출하고 입금하더라도 비정상적으로 많은 돈이 인출되거나 자금이 사라지는 일이 벌어지지 않는지 봐야함

보안(security)과 안정성(reliability)을 최우선으로 테스트 해야함
- 계좌는 항상 안전
- 현금 액수가 정확하게 유지
- 에러 때문에 자금손실 X